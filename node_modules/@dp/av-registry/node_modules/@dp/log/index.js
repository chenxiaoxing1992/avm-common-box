'use strict';
var loggie  = require('loggie');
var util    = require('util');

// get all flags from `process.env` 
var logger  = module.exports = loggie({
  // export CORTEX_LOG_LEVEL=debug,info,error,warn
  level:['info', 'error', 'warn' ,'success'],

  // if the current process exit before `logger.end()` called, there will throw an error message
  use_exit: false,
  catch_exception: false
});

logger.register('success', {
  template: '{{green|bold success}} {{arguments}}'
});

var success = logger.success;
var error = logger.error;

logger.success = function(msg, exit_code) {
    success.call(this, msg);
};

logger.error = function(msg){
	error.call(this,msg);
	process.exit(-1);
}